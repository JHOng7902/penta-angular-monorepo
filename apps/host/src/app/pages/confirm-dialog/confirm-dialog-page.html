<main class="confirm-dialog-page">
  <header class="confirm-dialog-page__hero">
    <h2>Confirmation Dialog</h2>
    <p>
      Use <strong>pt-ui-confirm-dialog</strong> for destructive or permission-based
      actions. It includes alert/confirmation styling and explicit Yes/No actions.
    </p>
  </header>

  <section class="confirm-dialog-page__section" id="basic">
    <h3>Default Confirmation</h3>
    <p class="confirm-dialog-page__desc">
      Choose a type and open the dialog to preview different alert styles.
    </p>
    <div class="confirm-dialog-page__row">
      <pt-ui-button buttonText="Alert type" (pressed)="openType('alert')"></pt-ui-button>
      <pt-ui-button
        buttonText="Confirmation type"
        variant="outline"
        (pressed)="openType('confirmation')"
      >
      </pt-ui-button>
      <span class="confirm-dialog-page__note">{{ confirmResult }}</span>
    </div>

    <pt-ui-confirm-dialog
      [(open)]="confirmOpen"
      title="Delete this record?"
      message="This action cannot be undone. Proceed anyway?"
      icon="warning"
      [type]="type"
      [closeOnBackdrop]="false"
      confirmText="Yes"
      cancelText="No"
      (confirmed)="onConfirmed()"
      (cancelled)="onCancelled()"
    ></pt-ui-confirm-dialog>

    <div class="confirm-dialog-page__code-grid">
      <div class="confirm-dialog-page__code-block">
        <span class="confirm-dialog-page__code-label">HTML</span>
        <pre class="confirm-dialog-page__code" ngNonBindable><code>&lt;pt-ui-confirm-dialog
  title="Delete this record?"
  message="This action cannot be undone. Proceed anyway?"
  icon="warning"
  type="alert"
  confirmText="Yes"
  cancelText="No"
  [(open)]="open"
  (confirmed)="onConfirmed()"
  (cancelled)="onCancelled()"
&gt;&lt;/pt-ui-confirm-dialog&gt;</code></pre>
      </div>
      <div class="confirm-dialog-page__code-block">
        <span class="confirm-dialog-page__code-label">TypeScript</span>
        <pre class="confirm-dialog-page__code" ngNonBindable><code>confirmOpen = false;
type: ConfirmDialogType = 'alert';
confirmResult = 'No decision yet.';

openType(type: ConfirmDialogType): void &#123;
  this.type = type;
  this.confirmOpen = true;
&#125;

onConfirmed(): void &#123;
  this.confirmResult = 'Confirmed';
&#125;

onCancelled(): void &#123;
  this.confirmResult = 'Cancelled';
&#125;</code></pre>
      </div>
    </div>
  </section>

  <section class="confirm-dialog-page__section" id="service">
    <h3>Service Usage</h3>
    <p class="confirm-dialog-page__desc">
      In real apps, developers often open a confirmation dialog from TypeScript:
      <code>this.confirmationDialogService.openDialog(...)</code>.
    </p>
    <div class="confirm-dialog-page__row">
      <pt-ui-button buttonText="Open via service" (pressed)="openServiceDialog()"></pt-ui-button>
      <span class="confirm-dialog-page__note">{{ confirmResult }}</span>
    </div>

    @if (serviceState$ | async; as state) {
      <pt-ui-confirm-dialog
        [open]="state.open"
        [title]="state.title"
        [message]="state.message"
        [icon]="state.icon"
        [type]="state.type"
        [confirmText]="state.confirmText"
        [cancelText]="state.cancelText"
        [closeOnBackdrop]="state.closeOnBackdrop"
        [width]="state.width"
        [height]="state.height"
        [minWidth]="state.minWidth"
        [minHeight]="state.minHeight"
        [maxWidth]="state.maxWidth"
        [maxHeight]="state.maxHeight"
        (confirmed)="confirmationDialogService.confirm()"
        (cancelled)="confirmationDialogService.cancel()"
        (afterClosed)="confirmationDialogService.onAfterClosed()"
      ></pt-ui-confirm-dialog>
    }

    <div class="confirm-dialog-page__code-grid">
      <div class="confirm-dialog-page__code-block">
        <span class="confirm-dialog-page__code-label">HTML</span>
        <pre class="confirm-dialog-page__code" ngNonBindable><code>&#64;if (serviceState$ | async; as state) &#123;
  &lt;pt-ui-confirm-dialog
    [open]="state.open"
    [title]="state.title"
    [message]="state.message"
    [icon]="state.icon"
    [type]="state.type"
    [confirmText]="state.confirmText"
    [cancelText]="state.cancelText"
    (confirmed)="confirmationDialogService.confirm()"
    (cancelled)="confirmationDialogService.cancel()"
    (afterClosed)="confirmationDialogService.onAfterClosed()"
  &gt;&lt;/pt-ui-confirm-dialog&gt;
&#125;</code></pre>
      </div>
      <div class="confirm-dialog-page__code-block">
        <span class="confirm-dialog-page__code-label">TypeScript</span>
        <pre class="confirm-dialog-page__code" ngNonBindable><code>constructor(private readonly confirmationDialogService: ConfirmationDialogService) &#123;&#125;

openServiceDialog(): void &#123;
  this.confirmationDialogService
    .openDialog('Confirmation', 'Are you sure want to process, this cannot be undo', &#123;
      icon: 'warning',
      type: 'alert',
      confirmText: 'Yes',
      cancelText: 'No',
    &#125;)
    .then((confirmed) =&gt; &#123;
      this.confirmResult = confirmed ? 'Confirmed' : 'Cancelled';
    &#125;);
&#125;</code></pre>
      </div>
    </div>
  </section>

  <section class="confirm-dialog-page__section" id="sizing">
    <h3>Size Controls</h3>
    <p class="confirm-dialog-page__desc">
      Bind width/height settings to match your layout.
    </p>
    <div class="confirm-dialog-page__grid confirm-dialog-page__inputs">
      <pt-ui-input label="Width" [(value)]="dialogWidth" placeholder="520px"></pt-ui-input>
      <pt-ui-input label="Height" [(value)]="dialogHeight" placeholder="auto"></pt-ui-input>
      <pt-ui-input label="Min Width" [(value)]="dialogMinWidth" placeholder="320px"></pt-ui-input>
      <pt-ui-input label="Min Height" [(value)]="dialogMinHeight" placeholder="auto"></pt-ui-input>
      <pt-ui-input label="Max Width" [(value)]="dialogMaxWidth" placeholder="720px"></pt-ui-input>
      <pt-ui-input label="Max Height" [(value)]="dialogMaxHeight" placeholder="70vh"></pt-ui-input>
    </div>
    <pt-ui-button buttonText="Open sized confirmation" (pressed)="sizeOpen = true"></pt-ui-button>
    <pt-ui-confirm-dialog
      [(open)]="sizeOpen"
      title="Sized confirmation"
      message="Adjust width, height, and min/max constraints using the inputs above."
      icon="info"
      type="confirmation"
      [closeOnBackdrop]="false"
      confirmText="Okay"
      cancelText="Cancel"
      [width]="dialogWidth"
      [height]="dialogHeight"
      [minWidth]="dialogMinWidth"
      [minHeight]="dialogMinHeight"
      [maxWidth]="dialogMaxWidth"
      [maxHeight]="dialogMaxHeight"
      (confirmed)="onConfirmed()"
      (cancelled)="onCancelled()"
    ></pt-ui-confirm-dialog>

    <pre class="confirm-dialog-page__code" ngNonBindable><code>&lt;pt-ui-confirm-dialog
  [width]="'520px'"
  [height]="'auto'"
  [minWidth]="'320px'"
  [minHeight]="'auto'"
  [maxWidth]="'720px'"
  [maxHeight]="'70vh'"
&gt;&lt;/pt-ui-confirm-dialog&gt;</code></pre>
  </section>

  <section class="confirm-dialog-page__section" id="customize">
    <h3>Customize Styles</h3>
    <p class="confirm-dialog-page__desc">
      Wrap the confirmation dialog in a class and override styles locally.
      For component-scoped styles, use <code>::ng-deep</code> or move overrides
      to a global stylesheet.
    </p>
    <pt-ui-button
      buttonText="Open themed confirmation"
      (pressed)="customOpen = true"
    ></pt-ui-button>
    <div class="confirm-dialog-page__custom-theme">
      <pt-ui-confirm-dialog
        [(open)]="customOpen"
        title="Archive this project?"
        message="You can restore archived projects later."
        icon="task_alt"
        type="confirmation"
        [closeOnBackdrop]="false"
        confirmText="Yes, archive"
        cancelText="Cancel"
        (confirmed)="onConfirmed()"
        (cancelled)="onCancelled()"
      ></pt-ui-confirm-dialog>
    </div>

    <pre class="confirm-dialog-page__code" ngNonBindable><code>&lt;div class="confirm-dialog-page__custom-theme"&gt;
  &lt;pt-ui-confirm-dialog title="Archive this project?" [(open)]="open"&gt;&lt;/pt-ui-confirm-dialog&gt;
&lt;/div&gt;

:host ::ng-deep .confirm-dialog-page__custom-theme .pt-ui-confirm-dialog__panel &#123;
  border-color: rgba(16, 185, 129, 0.45);
  box-shadow: 0 28px 70px rgba(16, 185, 129, 0.18);
&#125;

:host ::ng-deep .confirm-dialog-page__custom-theme .pt-ui-confirm-dialog__header &#123;
  background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
&#125;

:host ::ng-deep .confirm-dialog-page__custom-theme .pt-ui-confirm-dialog__footer &#123;
  background: #ecfdf5;
&#125;</code></pre>
  </section>

  <section class="confirm-dialog-page__section" id="api">
    <h3>Inputs &amp; Outputs</h3>
    <div class="confirm-dialog-page__api">
      <div>
        <h4>Inputs</h4>
        <table class="confirm-dialog-page__api-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Usage</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>open</code></td><td>boolean</td><td>Control dialog visibility (supports <code>[(open)]</code>).</td></tr>
            <tr><td><code>title</code></td><td>string</td><td>Header title text.</td></tr>
            <tr><td><code>message</code></td><td>string</td><td>Main confirmation message text.</td></tr>
            <tr><td><code>ariaLabel</code></td><td>string</td><td>Accessible label when title is not used.</td></tr>
            <tr><td><code>icon</code></td><td>string</td><td>Material icon name shown in the header.</td></tr>
            <tr><td><code>type</code></td><td><code>'alert' | 'confirmation'</code></td><td>Visual confirm type variant.</td></tr>
            <tr><td><code>confirmText</code></td><td>string</td><td>Text for the confirm action button.</td></tr>
            <tr><td><code>cancelText</code></td><td>string</td><td>Text for the cancel action button.</td></tr>
            <tr><td><code>closeOnBackdrop</code></td><td>boolean</td><td>Close when clicking outside the panel.</td></tr>
            <tr><td><code>width</code></td><td>string | number</td><td>Dialog width.</td></tr>
            <tr><td><code>height</code></td><td>string | number</td><td>Dialog height.</td></tr>
            <tr><td><code>minWidth</code></td><td>string | number</td><td>Minimum width constraint.</td></tr>
            <tr><td><code>minHeight</code></td><td>string | number</td><td>Minimum height constraint.</td></tr>
            <tr><td><code>maxWidth</code></td><td>string | number</td><td>Maximum width constraint.</td></tr>
            <tr><td><code>maxHeight</code></td><td>string | number</td><td>Maximum height constraint.</td></tr>
            <tr><td><code>panelClass</code></td><td>string | string[]</td><td>Extra class(es) applied to the dialog panel.</td></tr>
            <tr><td><code>backdropClass</code></td><td>string | string[]</td><td>Extra class(es) applied to the backdrop.</td></tr>
          </tbody>
        </table>
      </div>
      <div>
        <h4>Outputs</h4>
        <table class="confirm-dialog-page__api-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Usage</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>openChange</code></td><td>EventEmitter&lt;boolean&gt;</td><td>Emits when open state changes.</td></tr>
            <tr><td><code>confirmed</code></td><td>EventEmitter&lt;void&gt;</td><td>Emits when confirm action is clicked.</td></tr>
            <tr><td><code>cancelled</code></td><td>EventEmitter&lt;void&gt;</td><td>Emits when cancel action is clicked.</td></tr>
            <tr><td><code>afterClosed</code></td><td>EventEmitter&lt;void&gt;</td><td>Emits after close animation fully completes.</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
</main>
