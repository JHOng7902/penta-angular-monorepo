<main class="nested-table-page">
  <header class="nested-table-page__hero">
    <h2>Nested Table</h2>
    <p>
      The <strong>pt-ui-nested-table</strong> displays parent rows with a collapsible
      sub-table. Click the expand icon to reveal nested data.
    </p>
  </header>

  <section class="nested-table-page__section" id="import-use">
    <h3>Import &amp; Use</h3>
    <ol class="nested-table-page__steps">
      <li>Import <code>NestedTable</code> from the shared library.</li>
      <li>Provide parent data and the nested key.</li>
      <li>Define column lists for parent and child rows.</li>
    </ol>
    <pre class="nested-table-page__code" ngNonBindable><code>import &#123; NestedTable &#125; from '@penta/shared-ui';

&lt;pt-ui-nested-table
  [data]="nestedRows"
  [columns]="columns"
  [nestedKey]="'StationOrgans'"
  [nestedColumns]="nestedColumns"
  [displayCheckbox]="false"
  [displayNestedCheckbox]="true"
  [displayIndex]="false"
  [displayNestedIndex]="true"
  [enableSorting]="true"
  [enableNestedSorting]="true"
  tableHeight="52vh"
  nestedTableHeight="32vh"
  [stickyHeader]="true"
  [nestedStickyHeader]="true"
  [displayView]="true"
  [displayEdit]="true"
  [displayDelete]="true"
  [displayNestedView]="true"
  [displayNestedEdit]="true"
  [displayNestedDelete]="true"
  (view)="onView($event)"
  (edit)="onEdit($event)"
  (remove)="onDelete($event)"
  (nestedView)="onNestedView($event)"
  (nestedEdit)="onNestedEdit($event)"
  (nestedRemove)="onNestedDelete($event)"
&gt;&lt;/pt-ui-nested-table&gt;</code></pre>
  </section>

  <section class="nested-table-page__section" id="demo">
    <h3>Live Demo</h3>
    <p class="nested-table-page__desc">
      Expand a station row to see its organs.
    </p>
    <pt-ui-nested-table
      [data]="nestedRows"
      [columns]="columns"
      [nestedKey]="'StationOrgans'"
      [nestedColumns]="nestedColumns"
      [displayCheckbox]="displayCheckbox"
      [displayNestedCheckbox]="displayNestedCheckbox"
      [displayIndex]="displayIndex"
      [displayNestedIndex]="displayNestedIndex"
      [enableSorting]="enableSorting"
      [enableNestedSorting]="enableNestedSorting"
      [tableHeight]="tableHeight"
      [nestedTableHeight]="nestedTableHeight"
      [stickyHeader]="stickyHeader"
      [nestedStickyHeader]="nestedStickyHeader"
      [displayView]="displayView"
      [displayEdit]="displayEdit"
      [displayDelete]="displayDelete"
      [displayNestedView]="displayNestedView"
      [displayNestedEdit]="displayNestedEdit"
      [displayNestedDelete]="displayNestedDelete"
      (view)="onView($event)"
      (edit)="onEdit($event)"
      (remove)="onDelete($event)"
      (nestedView)="onNestedView($event)"
      (nestedEdit)="onNestedEdit($event)"
      (nestedRemove)="onNestedDelete($event)"
    ></pt-ui-nested-table>
    <div class="nested-table-page__notice">
      <strong>Last action:</strong> {{ lastAction }}
    </div>
  </section>

  <section class="nested-table-page__section" id="example-readonly">
    <h3>Read-Only (No Actions)</h3>
    <p class="nested-table-page__desc">
      Basic nested table with sorting and sticky headers, without action buttons or checkboxes.
    </p>
    <pre class="nested-table-page__code" ngNonBindable><code>&lt;pt-ui-nested-table
  [data]="nestedRows"
  [columns]="columns"
  [nestedKey]="'StationOrgans'"
  [nestedColumns]="nestedColumns"
  [enableSorting]="true"
  [enableNestedSorting]="true"
  [displayView]="false"
  [displayEdit]="false"
  [displayDelete]="false"
  [displayNestedView]="false"
  [displayNestedEdit]="false"
  [displayNestedDelete]="false"
  [displayCheckbox]="false"
  [displayNestedCheckbox]="false"
  [displayIndex]="false"
  [displayNestedIndex]="false"
  tableHeight="36vh"
  nestedTableHeight="24vh"
  [stickyHeader]="true"
  [nestedStickyHeader]="true"
&gt;&lt;/pt-ui-nested-table&gt;</code></pre>
    <pt-ui-nested-table
      [data]="nestedRows"
      [columns]="columns"
      [nestedKey]="'StationOrgans'"
      [nestedColumns]="nestedColumns"
      [enableSorting]="true"
      [enableNestedSorting]="true"
      [displayView]="false"
      [displayEdit]="false"
      [displayDelete]="false"
      [displayNestedView]="false"
      [displayNestedEdit]="false"
      [displayNestedDelete]="false"
      [displayCheckbox]="false"
      [displayNestedCheckbox]="false"
      [displayIndex]="false"
      [displayNestedIndex]="false"
      tableHeight="36vh"
      nestedTableHeight="24vh"
      [stickyHeader]="true"
      [nestedStickyHeader]="true"
    ></pt-ui-nested-table>
  </section>

  <section class="nested-table-page__section" id="example-selection">
    <h3>Selection + Index</h3>
    <p class="nested-table-page__desc">
      Enable selection and row indexes for both parent and child rows.
    </p>
    <pre class="nested-table-page__code" ngNonBindable><code>&lt;pt-ui-nested-table
  [data]="nestedRows"
  [columns]="columns"
  [nestedKey]="'StationOrgans'"
  [nestedColumns]="nestedColumns"
  [displayCheckbox]="true"
  [displayNestedCheckbox]="true"
  [displayIndex]="true"
  [displayNestedIndex]="true"
  [enableSorting]="true"
  [enableNestedSorting]="true"
  tableHeight="36vh"
  nestedTableHeight="24vh"
  [stickyHeader]="true"
  [nestedStickyHeader]="true"
&gt;&lt;/pt-ui-nested-table&gt;</code></pre>
    <pt-ui-nested-table
      [data]="nestedRows"
      [columns]="columns"
      [nestedKey]="'StationOrgans'"
      [nestedColumns]="nestedColumns"
      [displayCheckbox]="true"
      [displayNestedCheckbox]="true"
      [displayIndex]="true"
      [displayNestedIndex]="true"
      [enableSorting]="true"
      [enableNestedSorting]="true"
      tableHeight="36vh"
      nestedTableHeight="24vh"
      [stickyHeader]="true"
      [nestedStickyHeader]="true"
    ></pt-ui-nested-table>
  </section>

  <section class="nested-table-page__section" id="example-disabled">
    <h3>Disabled Checkboxes</h3>
    <p class="nested-table-page__desc">
      Disable selection based on row data (for example, completed or scrapped rows).
    </p>
    <pre class="nested-table-page__code" ngNonBindable><code>&lt;pt-ui-nested-table
  [data]="nestedRows"
  [columns]="columns"
  [nestedKey]="'StationOrgans'"
  [nestedColumns]="nestedColumns"
  [displayCheckbox]="true"
  [displayNestedCheckbox]="true"
  [checkboxDisabled]="isParentCheckboxDisabled"
  [nestedCheckboxDisabled]="isNestedCheckboxDisabled"
&gt;&lt;/pt-ui-nested-table&gt;</code></pre>
    <pt-ui-nested-table
      [data]="nestedRows"
      [columns]="columns"
      [nestedKey]="'StationOrgans'"
      [nestedColumns]="nestedColumns"
      [displayCheckbox]="true"
      [displayNestedCheckbox]="true"
      [checkboxDisabled]="isParentCheckboxDisabled"
      [nestedCheckboxDisabled]="isNestedCheckboxDisabled"
    ></pt-ui-nested-table>
  </section>

  <section class="nested-table-page__section" id="example-compact">
    <h3>Compact (Short Height)</h3>
    <p class="nested-table-page__desc">
      Compact layout with actions enabled and shorter heights.
    </p>
    <pre class="nested-table-page__code" ngNonBindable><code>&lt;pt-ui-nested-table
  [data]="nestedRows"
  [columns]="columns"
  [nestedKey]="'StationOrgans'"
  [nestedColumns]="nestedColumns"
  [displayView]="true"
  [displayEdit]="true"
  [displayDelete]="true"
  [displayNestedView]="true"
  [displayNestedEdit]="true"
  [displayNestedDelete]="true"
  [enableSorting]="true"
  [enableNestedSorting]="true"
  tableHeight="28vh"
  nestedTableHeight="18vh"
&gt;&lt;/pt-ui-nested-table&gt;</code></pre>
    <pt-ui-nested-table
      [data]="nestedRows"
      [columns]="columns"
      [nestedKey]="'StationOrgans'"
      [nestedColumns]="nestedColumns"
      [displayView]="true"
      [displayEdit]="true"
      [displayDelete]="true"
      [displayNestedView]="true"
      [displayNestedEdit]="true"
      [displayNestedDelete]="true"
      [enableSorting]="true"
      [enableNestedSorting]="true"
      tableHeight="28vh"
      nestedTableHeight="18vh"
    ></pt-ui-nested-table>
  </section>

  <section class="nested-table-page__section" id="api">
    <h3>Inputs &amp; Outputs</h3>
    <div class="nested-table-page__api">
      <div>
        <h4>Inputs</h4>
        <table class="nested-table-page__api-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Usage</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>data</code></td><td>array</td><td>Parent rows for the main table.</td></tr>
            <tr><td><code>columns</code></td><td>string[]</td><td>Column list for parent rows.</td></tr>
            <tr><td><code>nestedKey</code></td><td>string</td><td>Property name that holds child rows.</td></tr>
            <tr><td><code>nestedColumns</code></td><td>string[]</td><td>Column list for child rows.</td></tr>
            <tr><td><code>displayCheckbox</code></td><td>boolean</td><td>Show parent selection checkboxes.</td></tr>
            <tr><td><code>displayNestedCheckbox</code></td><td>boolean</td><td>Show child selection checkboxes.</td></tr>
            <tr><td><code>checkboxDisabled</code></td><td>boolean | (row) =&gt; boolean</td><td>Disable parent checkboxes globally or per row.</td></tr>
            <tr><td><code>nestedCheckboxDisabled</code></td><td>boolean | (row) =&gt; boolean</td><td>Disable child checkboxes globally or per row.</td></tr>
            <tr><td><code>displayIndex</code></td><td>boolean</td><td>Show parent row numbering.</td></tr>
            <tr><td><code>displayNestedIndex</code></td><td>boolean</td><td>Show child row numbering.</td></tr>
            <tr><td><code>enableSorting</code></td><td>boolean</td><td>Enable sorting for parent columns.</td></tr>
            <tr><td><code>enableNestedSorting</code></td><td>boolean</td><td>Enable sorting for child columns.</td></tr>
            <tr><td><code>displayView</code></td><td>boolean</td><td>Show parent view action button.</td></tr>
            <tr><td><code>displayEdit</code></td><td>boolean</td><td>Show parent edit action button.</td></tr>
            <tr><td><code>displayDelete</code></td><td>boolean</td><td>Show parent delete action button.</td></tr>
            <tr><td><code>displayNestedView</code></td><td>boolean</td><td>Show child view action button.</td></tr>
            <tr><td><code>displayNestedEdit</code></td><td>boolean</td><td>Show child edit action button.</td></tr>
            <tr><td><code>displayNestedDelete</code></td><td>boolean</td><td>Show child delete action button.</td></tr>
            <tr><td><code>stickyHeader</code></td><td>boolean</td><td>Sticky header for the parent table.</td></tr>
            <tr><td><code>tableHeight</code></td><td>string</td><td>Height for the parent table container.</td></tr>
            <tr><td><code>nestedTableHeight</code></td><td>string</td><td>Height for the nested table container.</td></tr>
            <tr><td><code>nestedStickyHeader</code></td><td>boolean</td><td>Sticky header for the nested table.</td></tr>
            <tr><td><code>expandIcon</code></td><td>string</td><td>Icon for collapsed state.</td></tr>
            <tr><td><code>collapseIcon</code></td><td>string</td><td>Icon for expanded state.</td></tr>
          </tbody>
        </table>
      </div>
      <div>
        <h4>Outputs</h4>
        <table class="nested-table-page__api-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Usage</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><code>view</code></td><td>EventEmitter&lt;row&gt;</td><td>Emits parent row data when View is clicked.</td></tr>
            <tr><td><code>edit</code></td><td>EventEmitter&lt;row&gt;</td><td>Emits parent row data when Edit is clicked.</td></tr>
            <tr><td><code>remove</code></td><td>EventEmitter&lt;row&gt;</td><td>Emits parent row data when Delete is clicked.</td></tr>
            <tr><td><code>nestedView</code></td><td>EventEmitter&lt;row&gt;</td><td>Emits child row data when View is clicked.</td></tr>
            <tr><td><code>nestedEdit</code></td><td>EventEmitter&lt;row&gt;</td><td>Emits child row data when Edit is clicked.</td></tr>
            <tr><td><code>nestedRemove</code></td><td>EventEmitter&lt;row&gt;</td><td>Emits child row data when Delete is clicked.</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
</main>
